<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework | Marco Gomiero</title><meta name=keywords content><meta name=description content="Today I want to share KMP FatFramework Cocoa, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.
The plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at Uniwhere and Revelop. The libraries are published in a FatFramework that contains the code for every required architecture (real devices use the Arm64 architecture, while the simulator uses the host computer architecture which in most of the cases is X64)."><meta name=author content="Marco Gomiero"><link rel=canonical href=https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/><link crossorigin=anonymous href=/assets/css/stylesheet.min.686715e54e31dbf63447efd76235e41e047fd8826df608657b7b0ddb3a0d900d.css integrity="sha256-aGcV5U4x2/Y0R+/XYjXkHgR/2IJt9ghle3sN2zoNkA0=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.marcogomiero.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.marcogomiero.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.marcogomiero.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.marcogomiero.com/apple-touch-icon.png><link rel=mask-icon href=https://www.marcogomiero.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-69FZ1TLE7E"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-69FZ1TLE7E",{anonymize_ip:!1})}</script><meta property="og:title" content="Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework"><meta property="og:description" content="Today I want to share KMP FatFramework Cocoa, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.
The plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at Uniwhere and Revelop. The libraries are published in a FatFramework that contains the code for every required architecture (real devices use the Arm64 architecture, while the simulator uses the host computer architecture which in most of the cases is X64)."><meta property="og:type" content="article"><meta property="og:url" content="https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-02T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-02T00:00:00+00:00"><meta property="og:site_name" content="Marco Gomiero"><meta name=twitter:card content="summary"><meta name=twitter:title content="Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework"><meta name=twitter:description content="Today I want to share KMP FatFramework Cocoa, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.
The plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at Uniwhere and Revelop. The libraries are published in a FatFramework that contains the code for every required architecture (real devices use the Arm64 architecture, while the simulator uses the host computer architecture which in most of the cases is X64)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.marcogomiero.com/posts/"},{"@type":"ListItem","position":3,"name":"Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework","item":"https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework","name":"Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework","description":"Today I want to share KMP FatFramework Cocoa, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.\nThe plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at Uniwhere and Revelop. The libraries are published in a FatFramework that contains the code for every required architecture (real devices use the Arm64 architecture, while the simulator uses the host computer architecture which in most of the cases is X64).","keywords":[],"articleBody":"Today I want to share KMP FatFramework Cocoa, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.\nThe plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at Uniwhere and Revelop. The libraries are published in a FatFramework that contains the code for every required architecture (real devices use the Arm64 architecture, while the simulator uses the host computer architecture which in most of the cases is X64).\nAfter copying and pasting the task between different projects, I thought that having them bundled into a Gradle plugin, would be a good idea.\nFeatures The plugin is composed of a bunch of tasks that let you build the FatFramework with the Debug or Release target, publish both the versions to a CocoaPod repository, and also create the repository.\nThe task that publishes the debug version of the FatFramework will use the develop branch of the CocoaPod repository, while the task for the release version will use the main (or master) branch and it will also tag the release with the provided version number. In this way, in the iOS project you can get the latest changes published on the develop branch:\npod '', :git =\u003e \"git@github.com:/.git\", :branch =\u003e 'develop' or specify a tag to get the release version:\npod '', :git =\u003e \"git@github.com:/.git\", :tag =\u003e '' For all the details about the tasks and the required configurations, you can give a look at the documentation on the GitHub repo. Instead, if you are interested in the internals of the tasks, I’ve recently written an article about the topic.\nThis is my first Gradle plugin and I’ve learned a lot during the process. If you notice a bug or something strange, feel free to report it on GitHub or to contribute (contributions are always appreciated).\nAnd, if you have any suggestion or any kind of doubt, feel free to reach me out on Twitter @marcoGomier.\n","wordCount":"348","inLanguage":"en","datePublished":"2021-03-02T00:00:00Z","dateModified":"2021-03-02T00:00:00Z","author":{"@type":"Person","name":"Marco Gomiero"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/"},"publisher":{"@type":"Organization","name":"Marco Gomiero","logo":{"@type":"ImageObject","url":"https://www.marcogomiero.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.marcogomiero.com accesskey=h title="Marco Gomiero (Alt + H)">Marco Gomiero</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://www.marcogomiero.com/posts/ title=Write><span>Write</span></a></li><li><a href=https://www.marcogomiero.com/talks/ title=Speak><span>Speak</span></a></li><li><a href=https://www.marcogomiero.com/projects/ title=Build><span>Build</span></a></li><li><a href=https://www.marcogomiero.com/about-me/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework</h1><div class=post-meta style=margin-top:16px><span title='2021-03-02 00:00:00 +0000 UTC'>2 March 2021</span>&nbsp;·&nbsp;2 min</div></header><div class=post-content><p>Today I want to share <a href=https://github.com/prof18/kmp-fatframework-cocoa><strong>KMP FatFramework Cocoa</strong></a>, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.</p><p>The plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at <a href=https://www.uniwhere.com/>Uniwhere</a> and <a href=https://revelop.app/>Revelop</a>. The libraries are published in a <strong>FatFramework</strong> that contains the code for every required architecture (real devices use the <em>Arm64</em> architecture, while the simulator uses the host computer architecture which in most of the cases is <em>X64</em>).</p><p>After copying and pasting the task between different projects, I thought that having them bundled into a Gradle plugin, would be a good idea.</p><h2 id=features>Features<a hidden class=anchor aria-hidden=true href=#features>#</a></h2><p>The plugin is composed of a bunch of tasks that let you build the FatFramework with the <code>Debug</code> or <code>Release</code> target, publish both the versions to a CocoaPod repository, and also create the repository.</p><p>The task that publishes the debug version of the FatFramework will use the <code>develop</code> branch of the CocoaPod repository, while the task for the release version will use the <code>main</code> (or <code>master</code>) branch and it will also tag the release with the provided version number. In this way, in the iOS project you can get the latest changes published on the develop branch:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>pod <span style=color:#e6db74>&#39;&lt;your-library-name&gt;&#39;</span>, <span style=color:#e6db74>:git</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;git@github.com:&lt;git-username&gt;/&lt;repo-name&gt;.git&#34;</span>, <span style=color:#e6db74>:branch</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;develop&#39;</span>
</span></span></code></pre></div><p>or specify a tag to get the release version:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span>pod <span style=color:#e6db74>&#39;&lt;your-library-name&gt;&#39;</span>, <span style=color:#e6db74>:git</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;git@github.com:&lt;git-username&gt;/&lt;repo-name&gt;.git&#34;</span>, <span style=color:#e6db74>:tag</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;&lt;version-number&gt;&#39;</span>
</span></span></code></pre></div><p>For all the details about the tasks and the required configurations, you can give a look at the documentation on the <a href=https://github.com/prof18/kmp-fatframework-cocoa>GitHub repo</a>.
Instead, if you are interested in the internals of the tasks, I’ve recently written <a href=https://www.marcogomiero.com/posts/2021/kmp-existing-project/>an article about the topic</a>.</p><p>This is my first Gradle plugin and I’ve learned a lot during the process. If you notice a bug or something strange, feel free to <a href=https://github.com/prof18/kmp-fatframework-cocoa/issues>report it on GitHub</a> or to contribute (contributions are always appreciated).</p><p>And, if you have any suggestion or any kind of doubt, feel free to reach me out on Twitter <a href=https://twitter.com/marcoGomier>@marcoGomier</a>.</p></div><div class=article-footer><div class=post-content>To stay up to date with my writing and my projects, follow me on <a href=https://androiddev.social/@marcogom target=_blank>Mastodon</a> or <a href=https://twitter.com/marcoGomier target=_blank>Twitter</a>. If you have any questions, feel free to reach me out!</div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://www.marcogomiero.com>Marco Gomiero</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>