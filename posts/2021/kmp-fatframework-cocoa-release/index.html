<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework - Marco Gomiero</title><meta name=Description content="Software Engineer · Google Developer Expert for Kotlin"><meta property="og:title" content="Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework"><meta property="og:description" content="Today I want to share KMP FatFramework Cocoa, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.
The plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at Uniwhere and Revelop. The libraries are published in a FatFramework that contains the code for every required architecture (real devices use the Arm64 architecture, while the simulator uses the host computer architecture which in most of the cases is X64)."><meta property="og:type" content="article"><meta property="og:url" content="https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/"><meta property="og:image" content="https://www.marcogomiero.com/img/profile.webp"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-03-02T00:00:00+00:00"><meta property="article:modified_time" content="2021-03-02T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.marcogomiero.com/img/profile.webp"><meta name=twitter:title content="Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework"><meta name=twitter:description content="Today I want to share KMP FatFramework Cocoa, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.
The plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at Uniwhere and Revelop. The libraries are published in a FatFramework that contains the code for every required architecture (real devices use the Arm64 architecture, while the simulator uses the host computer architecture which in most of the cases is X64)."><meta name=application-name content="Marco Gomiero"><meta name=apple-mobile-web-app-title content="Marco Gomiero"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/><link rel=prev href=https://www.marcogomiero.com/posts/2021/kmp-existing-project/><link rel=next href=https://www.marcogomiero.com/posts/2021/audio-video-setup/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><meta name=google-site-verification content="7rDTNqn214SsZ9mmV8Ps5v2vqy8aXFWyoq08udChYCs"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.marcogomiero.com\/posts\/2021\/kmp-fatframework-cocoa-release\/"},"image":["https:\/\/www.marcogomiero.com\/images\/Apple-Devices-Preview.png"],"genre":"posts","wordcount":350,"url":"https:\/\/www.marcogomiero.com\/posts\/2021\/kmp-fatframework-cocoa-release\/","datePublished":"2021-03-02T00:00:00+00:00","dateModified":"2021-03-02T00:00:00+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Marco Gomiero","logo":"https:\/\/www.marcogomiero.com\/images\/avatar.png"},"author":{"@type":"Person","name":"Marco Gomiero"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Marco Gomiero">Marco Gomiero</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts>Posts </a><a class=menu-item href=/talks>Talks </a><a class=menu-item href=/projects>Projects </a><a class=menu-item href=/about-me>About </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Marco Gomiero">Marco Gomiero</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts title>Posts</a><a class=menu-item href=/talks title>Talks</a><a class=menu-item href=/projects title>Projects</a><a class=menu-item href=/about-me title>About</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel=stylesheet><main class=main><div class=container><article class="page single"><h1 class=single-title>Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework</h1><br><div class=post-meta><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2 Mar 2021">2 Mar 2021</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;350 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;2 minutes&nbsp;</div></div><br><div class=content id=content><p>Today I want to share <a href=https://github.com/prof18/kmp-fatframework-cocoa target=_blank rel="noopener noreffer"><strong>KMP FatFramework Cocoa</strong></a>, a Gradle plugin for Kotlin Multiplatform projects that generate a FatFramework for iOS targets and manages the publishing process in a CocoaPod Repository.</p><p>The plugin is born from a set of unbundled Gradle tasks that I wrote to manage the building and the publishing process of Kotlin Multiplatform libraries for iOS that we use at <a href=https://www.uniwhere.com/ target=_blank rel="noopener noreffer">Uniwhere</a> and <a href=https://revelop.app/ target=_blank rel="noopener noreffer">Revelop</a>. The libraries are published in a <strong>FatFramework</strong> that contains the code for every required architecture (real devices use the <em>Arm64</em> architecture, while the simulator uses the host computer architecture which in most of the cases is <em>X64</em>).</p><p>After copying and pasting the task between different projects, I thought that having them bundled into a Gradle plugin, would be a good idea.</p><h2 id=features>Features</h2><p>The plugin is composed of a bunch of tasks that let you build the FatFramework with the <code>Debug</code> or <code>Release</code> target, publish both the versions to a CocoaPod repository, and also create the repository.</p><p>The task that publishes the debug version of the FatFramework will use the <code>develop</code> branch of the CocoaPod repository, while the task for the release version will use the <code>main</code> (or <code>master</code>) branch and it will also tag the release with the provided version number. In this way, in the iOS project you can get the latest changes published on the develop branch:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-ruby data-lang=ruby><span class=n>pod</span> <span class=s1>&#39;&lt;your-library-name&gt;&#39;</span><span class=p>,</span> <span class=ss>:git</span> <span class=o>=&gt;</span> <span class=s2>&#34;git@github.com:&lt;git-username&gt;/&lt;repo-name&gt;.git&#34;</span><span class=p>,</span> <span class=ss>:branch</span> <span class=o>=&gt;</span> <span class=s1>&#39;develop&#39;</span>
</code></pre></td></tr></table></div></div><p>or specify a tag to get the release version:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-ruby data-lang=ruby><span class=n>pod</span> <span class=s1>&#39;&lt;your-library-name&gt;&#39;</span><span class=p>,</span> <span class=ss>:git</span> <span class=o>=&gt;</span> <span class=s2>&#34;git@github.com:&lt;git-username&gt;/&lt;repo-name&gt;.git&#34;</span><span class=p>,</span> <span class=ss>:tag</span> <span class=o>=&gt;</span> <span class=s1>&#39;&lt;version-number&gt;&#39;</span>
</code></pre></td></tr></table></div></div><p>For all the details about the tasks and the required configurations, you can give a look at the documentation on the <a href=https://github.com/prof18/kmp-fatframework-cocoa target=_blank rel="noopener noreffer">GitHub repo</a>.
Instead, if you are interested in the internals of the tasks, I’ve recently written <a href=https://www.marcogomiero.com/posts/2021/kmp-existing-project/ target=_blank rel="noopener noreffer">an article about the topic</a>.</p><p>This is my first Gradle plugin and I’ve learned a lot during the process. If you notice a bug or something strange, feel free to <a href=https://github.com/prof18/kmp-fatframework-cocoa/issues target=_blank rel="noopener noreffer">report it on GitHub</a> or to contribute (contributions are always appreciated).</p><p>And, if you have any suggestion or any kind of doubt, feel free to reach me out on Twitter <a href=https://twitter.com/marcoGomier target=_blank rel="noopener noreffer">@marcoGomier</a>.</p></div><section style=width:90%;margin-left:auto;margin-right:auto;margin-top:30px;margin-bottom:30px><hr><div style=padding:25px><div class=content>To stay up to date with my writing and my projects, follow me on <a href=https://twitter.com/marcoGomier target=_blank>Twitter</a>. If you have any questions, feel free to reach me out!</div></div><hr></section><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/ data-title="Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework" data-via=marcoGomier><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/ data-title="Introducing KMP FatFramework Cocoa, a Gradle plugin for iOS FatFramework"><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://www.marcogomiero.com/posts/2021/kmp-fatframework-cocoa-release/><i class="fab fa-reddit fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2021/kmp-existing-project/ class=prev rel=prev title="Introducing Kotlin Multiplatform in an existing project"><i class="fas fa-angle-left fa-fw"></i>Introducing Kotlin Multiplatform in an existing project</a>
<a href=/posts/2021/audio-video-setup/ class=next rel=next title="My audio & video setup after 4 years of remote working">My audio & video setup after 4 years of remote working<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2017 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://www.marcogomiero.com/ target=_blank>Marco Gomiero</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:1e5},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-90975904-1 ',{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-90975904-1%20" async></script></body></html>