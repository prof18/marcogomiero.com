<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to create a parameterized base test class in Kotlin | Marco Gomiero</title><meta name=keywords content><meta name=description content="One exciting feature of JUnit 4 (and 5 as well, but this post will be focused on JUnit 4) is the possibility of running the same test with different input arguments.
That is made possible by a custom test runner called Parameterized, which will inject the provided arguments in the constructor of the test class. Instead, the different arguments must be defined in the companion object of the test class."><meta name=author content="Marco Gomiero"><link rel=canonical href=https://www.marcogomiero.com/posts/2023/parameterized-kotlin-base-test/><link crossorigin=anonymous href=/assets/css/stylesheet.min.686715e54e31dbf63447efd76235e41e047fd8826df608657b7b0ddb3a0d900d.css integrity="sha256-aGcV5U4x2/Y0R+/XYjXkHgR/2IJt9ghle3sN2zoNkA0=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93+QdxBJM917LmaT3s9E=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.marcogomiero.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.marcogomiero.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.marcogomiero.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.marcogomiero.com/apple-touch-icon.png><link rel=mask-icon href=https://www.marcogomiero.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-69FZ1TLE7E"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-69FZ1TLE7E",{anonymize_ip:!1})}</script><meta property="og:title" content="How to create a parameterized base test class in Kotlin"><meta property="og:description" content="One exciting feature of JUnit 4 (and 5 as well, but this post will be focused on JUnit 4) is the possibility of running the same test with different input arguments.
That is made possible by a custom test runner called Parameterized, which will inject the provided arguments in the constructor of the test class. Instead, the different arguments must be defined in the companion object of the test class."><meta property="og:type" content="article"><meta property="og:url" content="https://www.marcogomiero.com/posts/2023/parameterized-kotlin-base-test/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-31T00:00:00+00:00"><meta property="article:modified_time" content="2023-01-31T00:00:00+00:00"><meta property="og:site_name" content="Marco Gomiero"><meta name=twitter:card content="summary"><meta name=twitter:title content="How to create a parameterized base test class in Kotlin"><meta name=twitter:description content="One exciting feature of JUnit 4 (and 5 as well, but this post will be focused on JUnit 4) is the possibility of running the same test with different input arguments.
That is made possible by a custom test runner called Parameterized, which will inject the provided arguments in the constructor of the test class. Instead, the different arguments must be defined in the companion object of the test class."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://www.marcogomiero.com/posts/"},{"@type":"ListItem","position":3,"name":"How to create a parameterized base test class in Kotlin","item":"https://www.marcogomiero.com/posts/2023/parameterized-kotlin-base-test/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to create a parameterized base test class in Kotlin","name":"How to create a parameterized base test class in Kotlin","description":"One exciting feature of JUnit 4 (and 5 as well, but this post will be focused on JUnit 4) is the possibility of running the same test with different input arguments.\nThat is made possible by a custom test runner called Parameterized, which will inject the provided arguments in the constructor of the test class. Instead, the different arguments must be defined in the companion object of the test class.","keywords":[],"articleBody":" One exciting feature of JUnit 4 (and 5 as well, but this post will be focused on JUnit 4) is the possibility of running the same test with different input arguments.\nThat is made possible by a custom test runner called Parameterized, which will inject the provided arguments in the constructor of the test class. Instead, the different arguments must be defined in the companion object of the test class.\n@RunWith(Parameterized::class) class KotlinVersionTest(val kotlinVersion: String) { @Test fun `Kotlin version is correct`() { assertTrue(kotlinVersion.contains(\"1.7\")) } companion object { @JvmStatic @Parameterized.Parameters(name = \"with kotlinVersion {0}\") fun data() = listOf( \"1.7.0\", \"1.7.10\", \"1.7.20\", \"1.7.21\", ) } } However, in some situations, having a base test class helps set up a shared test environment.\nopen class BaseTest { lateinit var kotlinFeatures: KotlinFeatures @Before open fun setup() { kotlinFeatures = KotlinFeatures(kotlinVersion = \"1.7.0\") } @After fun cleanUp() { // Cleaning up stuff } } class KotlinVersionParameterizedTest { @Test fun `When the Kotlin version is 1_7_0, getNewFeatures returns the correct data`() { val kotlinFeatures = KotlinFeatures(kotlinVersion = \"1.7.0\") assertNotNull(kotlinFeatures) } } But what if KotlinFeatures needs to be tested with multiple kotlinVersion?\nThe BaseTest can be modified with a constructor that accepts an argument and a companion object that contains all the arguments required for the test.\nopen class BaseTest( private val kotlinVersion: String, ) { lateinit var kotlinFeatures: KotlinFeatures @Before open fun setup() { kotlinFeatures = KotlinFeatures(kotlinVersion = kotlinVersion) } @After fun cleanUp() { // Cleaning up stuff } companion object { @JvmStatic @Parameterized.Parameters(name = \"with kotlinVersion {0}\") fun data() = listOf( \"1.7.0\", \"1.7.10\", ) } } The test classes can now implement the BaseTest and run with the Parameterized test runner. It is only necessary to pass the argument to the Base Class’s constructor.\n@RunWith(Parameterized::class) class KotlinVersionParameterizedBaseTest(kotlinVersion: String): BaseTest(kotlinVersion) { @Test fun `getNewFeatures returns some data`() { val newFeatures = kotlinFeatures.getNewFeatures() assertNotNull(newFeatures) } } And that’s all! This way, running the same tests with different arguments and a shared configuration will be possible.\n","wordCount":"330","inLanguage":"en","datePublished":"2023-01-31T00:00:00Z","dateModified":"2023-01-31T00:00:00Z","author":{"@type":"Person","name":"Marco Gomiero"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.marcogomiero.com/posts/2023/parameterized-kotlin-base-test/"},"publisher":{"@type":"Organization","name":"Marco Gomiero","logo":{"@type":"ImageObject","url":"https://www.marcogomiero.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.marcogomiero.com accesskey=h title="Marco Gomiero (Alt + H)">Marco Gomiero</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://www.marcogomiero.com/posts/ title=Write><span>Write</span></a></li><li><a href=https://www.marcogomiero.com/talks/ title=Speak><span>Speak</span></a></li><li><a href=https://www.marcogomiero.com/projects/ title=Build><span>Build</span></a></li><li><a href=https://www.marcogomiero.com/about-me/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>How to create a parameterized base test class in Kotlin</h1><div class=post-meta style=margin-top:16px><span title='2023-01-31 00:00:00 +0000 UTC'>31 January 2023</span>&nbsp;·&nbsp;2 min</div></header><div class=post-content><a href=https://androidweekly.net/issues/issue-556><img style=margin:0 src=https://androidweekly.net/issues/issue-556/badge></a><br><p>One exciting feature of JUnit 4 (and 5 as well, but this post will be focused on JUnit 4) is the possibility of running the same test with different input arguments.</p><p>That is made possible by a <a href=https://github.com/junit-team/junit4/wiki/parameterized-tests>custom test runner</a> called <code>Parameterized</code>, which will inject the provided arguments in the constructor of the test class. Instead, the different arguments must be defined in the companion object of the test class.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#a6e22e>@RunWith</span>(Parameterized<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>)  
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>KotlinVersionTest</span>(<span style=color:#66d9ef>val</span> kotlinVersion: String) {  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>`Kotlin version is correct`</span>() {  
</span></span><span style=display:flex><span>        assertTrue(kotlinVersion.contains(<span style=color:#e6db74>&#34;1.7&#34;</span>))  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>companion</span> <span style=color:#66d9ef>object</span> {  
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@JvmStatic</span>  
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Parameterized</span>.Parameters(name = <span style=color:#e6db74>&#34;with kotlinVersion {0}&#34;</span>)  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>data</span>() = listOf(  
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;1.7.0&#34;</span>,  
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;1.7.10&#34;</span>,  
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;1.7.20&#34;</span>,  
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;1.7.21&#34;</span>,  
</span></span><span style=display:flex><span>        )  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>However, in some situations, having a base test class helps set up a shared test environment.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>open</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BaseTest</span> {  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>lateinit</span> <span style=color:#66d9ef>var</span> kotlinFeatures: KotlinFeatures  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Before</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>open</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>setup</span>() {  
</span></span><span style=display:flex><span>        kotlinFeatures = KotlinFeatures(kotlinVersion = <span style=color:#e6db74>&#34;1.7.0&#34;</span>)  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@After</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>cleanUp</span>() {  
</span></span><span style=display:flex><span>       <span style=color:#75715e>// Cleaning up stuff  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }   
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>KotlinVersionParameterizedTest</span> {  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>`When the Kotlin version is 1_7_0, getNewFeatures returns the correct data`</span>() {  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>val</span> kotlinFeatures = KotlinFeatures(kotlinVersion = <span style=color:#e6db74>&#34;1.7.0&#34;</span>)  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>        assertNotNull(kotlinFeatures)  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>But what if <code>KotlinFeatures</code> needs to be tested with multiple <code>kotlinVersion</code>?</p><p>The <code>BaseTest</code> can be modified with a constructor that accepts an argument and a companion object that contains all the arguments required for the test.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#66d9ef>open</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BaseTest</span>(  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>val</span> kotlinVersion: String,  
</span></span><span style=display:flex><span>) {  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>lateinit</span> <span style=color:#66d9ef>var</span> kotlinFeatures: KotlinFeatures  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Before</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>open</span> <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>setup</span>() {  
</span></span><span style=display:flex><span>        kotlinFeatures = KotlinFeatures(kotlinVersion = kotlinVersion)  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@After</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>cleanUp</span>() {  
</span></span><span style=display:flex><span>       <span style=color:#75715e>// Cleaning up stuff  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>companion</span> <span style=color:#66d9ef>object</span> {  
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@JvmStatic</span>  
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>@Parameterized</span>.Parameters(name = <span style=color:#e6db74>&#34;with kotlinVersion {0}&#34;</span>)  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>data</span>() = listOf(  
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;1.7.0&#34;</span>,  
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;1.7.10&#34;</span>,  
</span></span><span style=display:flex><span>        )  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The test classes can now implement the <code>BaseTest</code> and run with the <code>Parameterized</code> test runner. It is only necessary to pass the argument to the Base Class&rsquo;s constructor.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-kotlin data-lang=kotlin><span style=display:flex><span><span style=color:#a6e22e>@RunWith</span>(Parameterized<span style=color:#f92672>::</span><span style=color:#66d9ef>class</span>)  
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>KotlinVersionParameterizedBaseTest</span>(kotlinVersion: String): BaseTest(kotlinVersion) {  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Test</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>fun</span> <span style=color:#a6e22e>`getNewFeatures returns some data`</span>() {  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>val</span> newFeatures = kotlinFeatures.getNewFeatures()  
</span></span><span style=display:flex><span>        assertNotNull(newFeatures)  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And that’s all! This way, running the same tests with different arguments and a shared configuration will be possible.</p><figure><a href=/img/parameterized-base-test-kotiln/parameterized-test-result.png><img loading=lazy src=/img/parameterized-base-test-kotiln/parameterized-test-result.png></a></figure></div><div class=article-footer><div class=post-content>To stay up to date with my writing and my projects, follow me on <a href=https://androiddev.social/@marcogom target=_blank>Mastodon</a> or <a href=https://twitter.com/marcoGomier target=_blank>Twitter</a>. If you have any questions, feel free to reach me out!</div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://www.marcogomiero.com>Marco Gomiero</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>