<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Organize your Views: SwiftUI edition - Marco Gomiero</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="One of the pros of SwiftUI, and generally of declarative UI frameworks, is the capability of defining the UI with the same programming language the application uses.
With SwiftUI, it is not necessary anymore to bridge the UI definitions from somewhere else, resulting in a decrease of context switching between two different environments (Storyboards and Swift code, for example)
But “with great power comes great responsibility”, and a codebase can quickly become a nightmare without some structure and organization."><meta property="og:image" content><meta name=google-site-verification content="7rDTNqn214SsZ9mmV8Ps5v2vqy8aXFWyoq08udChYCs"><meta property="og:title" content="Organize your Views: SwiftUI edition"><meta property="og:description" content="One of the pros of SwiftUI, and generally of declarative UI frameworks, is the capability of defining the UI with the same programming language the application uses.
With SwiftUI, it is not necessary anymore to bridge the UI definitions from somewhere else, resulting in a decrease of context switching between two different environments (Storyboards and Swift code, for example)
But “with great power comes great responsibility”, and a codebase can quickly become a nightmare without some structure and organization."><meta property="og:type" content="article"><meta property="og:url" content="https://www.marcogomiero.com/posts/2023/organize-view-swiftui-edition/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-23T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-23T00:00:00+00:00"><meta property="og:site_name" content="Marco Gomiero"><meta name=twitter:card content="summary"><meta name=twitter:title content="Organize your Views: SwiftUI edition"><meta name=twitter:description content="One of the pros of SwiftUI, and generally of declarative UI frameworks, is the capability of defining the UI with the same programming language the application uses.
With SwiftUI, it is not necessary anymore to bridge the UI definitions from somewhere else, resulting in a decrease of context switching between two different environments (Storyboards and Swift code, for example)
But “with great power comes great responsibility”, and a codebase can quickly become a nightmare without some structure and organization."><script async src="https://www.googletagmanager.com/gtag/js?id=G-69FZ1TLE7E"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-69FZ1TLE7E",{anonymize_ip:!1})}</script><script src=https://www.marcogomiero.com/js/feather.min.js></script>
<link href="https://fonts.googleapis.com/css?family=JetBrains+Mono" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://www.marcogomiero.com/css/main.f2c7f60ec2d0155a784ade9b1b272143e1b8eb864a95bf75e606b49d8774389e.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://www.marcogomiero.com/css/dark.26c5bf79ef760a8f4feb8fc7be32ec86fc1f1da292b42c9fcc37879d4f774e3f.css disabled></head><body><div class=content><header><div class=main><a href=https://www.marcogomiero.com><h2>Marco Gomiero</h2></a></div><nav class=navbar><a href=/posts/><span>Write</span></a>
<a href=/talks/><span>Speak</span></a>
<a href=/projects/><span>Build</span></a>
<a href=/about-me/><span>About</span></a>
| <span class=dark-mode-toggle id=dark-mode-toggle onclick=toggleTheme()></span>
<script src=https://www.marcogomiero.com/js/themetoggle.js></script></nav></header><main><article><div class=title><h1 class=title>Organize your Views: SwiftUI edition</h1><div class=post-meta><span title='2023-03-23 00:00:00 +0000 UTC'>23 March 2023</span></div></div><section class=body><p>One of the pros of SwiftUI, and generally of declarative UI frameworks, is the capability of defining the UI with the same programming language the application uses.</p><p>With SwiftUI, it is not necessary anymore to bridge the UI definitions from somewhere else, resulting in a decrease of context switching between two different environments (Storyboards and Swift code, for example)</p><p>But “with great power comes great responsibility”, and a codebase can quickly become a nightmare without some structure and organization. Long files, large structs, and stateful UI components that hinder reusability are examples that can lead to a messed codebase.</p><p>In this article, I will show how I organized the codebase of <a href=https://github.com/prof18/MoneyFlow>MoneyFlow</a>, a money management app written with Kotlin Multiplatform, Jetpack Compose, and Swift UI.</p><blockquote><p>I wrote a similar article that covers the same topic for Jetpack Compose, the declarative UI framework for Android: <a href=/posts/2023/organize-view-compose-edition>“Organize your Views: Jetpack Compose edition”</a></p></blockquote><h2 id=screens-code-structure>Screens Code Structure</h2><p>To easily reach the entry point of a screen, I’ve decided to embrace the following structure.
Every screen has a single Swift file containing the screen’s View Struct, and the screen’s preview.</p><p>For example, for the MoneyFlow Home Screen, there is a <code>HomeScreen.swift</code> file that contains <code>HomeScreen</code>, and <code>HomeScreen_Previews </code>.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#78787e>// HomeScreen.swift</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>struct</span> <span style=color:#f3f99d>HomeScreen</span>: View {
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>body</span>: some View {
</span></span><span style=display:flex><span>        ...
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff5c57>struct</span> <span style=color:#f3f99d>HomeScreen_Previews</span>: PreviewProvider {
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>static</span> <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>previews</span>: some View {
</span></span><span style=display:flex><span>        HomeScreen()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}        
</span></span></code></pre></div><p>The screen’s struct should just be an entry point and should not contain the entire screen’s code to avoid growing the length of the class too much. Every piece of UI can be split into smaller (maybe even reusable) components.</p><p>To improve testability and increase reusability, the screen’s struct (and in general, all SwiftUI views) should be stateless. To achieve stateless views, the state needs to be hoisted.</p><p>State hoisting is a pattern of moving state to a view&rsquo;s caller. Instead of passing a state variable to a function or even a reference to the ViewModel, only the current values to display and callbacks to react on events are passed.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#ff5c57>struct</span> <span style=color:#f3f99d>HomeScreenContent</span>: View {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @Binding <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>appErrorData</span>: SnackbarData
</span></span><span style=display:flex><span>    @Binding <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>screenErrorData</span>: SnackbarData
</span></span><span style=display:flex><span>    @Binding <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>homeModel</span>: HomeModel
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>let</span> <span style=color:#ff5c57>onAppear</span>  : () -&gt; <span style=color:#ff5c57>Void</span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>let</span> <span style=color:#ff5c57>deleteTransaction</span>: (<span style=color:#ff5c57>Int64</span>) -&gt; <span style=color:#ff5c57>Void</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @State <span style=color:#ff5c57>private</span> <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>showAddTransaction</span> = <span style=color:#ff6ac1>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>body</span>: some View {
</span></span><span style=display:flex><span>	   ...
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This way, a view can be reused or tested in different scenarios without any external dependencies.</p><p>The connection with the ViewModel and with external dependencies is made in another View, only responsible for the connection.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#ff5c57>struct</span> <span style=color:#f3f99d>HomeScreen</span>: View {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    @EnvironmentObject <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>appState</span>: AppState
</span></span><span style=display:flex><span>    @StateObject <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>viewModel</span>: HomeViewModel = HomeViewModel()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>body</span>: some View {
</span></span><span style=display:flex><span>        HomeScreenContent(
</span></span><span style=display:flex><span>            appErrorData: <span style=color:#ff5c57>$</span>appState.snackbarData,
</span></span><span style=display:flex><span>            screenErrorData: <span style=color:#ff5c57>$</span>viewModel.snackbarData,
</span></span><span style=display:flex><span>            homeModel: <span style=color:#ff5c57>$</span>viewModel.homeModel,
</span></span><span style=display:flex><span>            onAppear: { viewModel.startObserving() },
</span></span><span style=display:flex><span>            deleteTransaction: { transactionId <span style=color:#ff6ac1>in</span>
</span></span><span style=display:flex><span>                viewModel.deleteTransaction(transactionId: transactionId)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>To ensure that state hoisting is done correctly without any dependency, a rule of thumb is to write views’s previews. That’s because a Preview, for example, won’t easily work with external dependencies.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#ff5c57>struct</span> <span style=color:#f3f99d>HomeScreen_Previews</span>: PreviewProvider {
</span></span><span style=display:flex><span>    <span style=color:#ff5c57>static</span> <span style=color:#ff5c57>var</span> <span style=color:#ff5c57>previews</span>: some View {
</span></span><span style=display:flex><span>        HomeScreenContent(
</span></span><span style=display:flex><span>            appErrorData: .constant(SnackbarData.<span style=color:#ff5c57>init</span>()),
</span></span><span style=display:flex><span>            screenErrorData: .constant(SnackbarData.<span style=color:#ff5c57>init</span>()),
</span></span><span style=display:flex><span>            homeModel: .constant(
</span></span><span style=display:flex><span>                HomeModel.HomeState(
</span></span><span style=display:flex><span>                    balanceRecap: BalanceRecap(totalBalance: <span style=color:#ff9f43>100</span>, monthlyIncome: <span style=color:#ff9f43>150</span>, monthlyExpenses: <span style=color:#ff9f43>50</span>),
</span></span><span style=display:flex><span>                    latestTransactions: [
</span></span><span style=display:flex><span>                        MoneyTransaction(
</span></span><span style=display:flex><span>                            id: <span style=color:#ff9f43>1</span>,
</span></span><span style=display:flex><span>                            title: <span style=color:#5af78e>&#34;Transaction&#34;</span>,
</span></span><span style=display:flex><span>                            icon: CategoryIcon.icAddressBook,
</span></span><span style=display:flex><span>                            amount: <span style=color:#ff9f43>50</span>,
</span></span><span style=display:flex><span>                            type: TransactionTypeUI.expense,
</span></span><span style=display:flex><span>                            milliseconds: <span style=color:#ff9f43>123456</span>,
</span></span><span style=display:flex><span>                            formattedDate: <span style=color:#5af78e>&#34;20/10/21&#34;</span>
</span></span><span style=display:flex><span>                        )
</span></span><span style=display:flex><span>                    ]
</span></span><span style=display:flex><span>                )
</span></span><span style=display:flex><span>            ),
</span></span><span style=display:flex><span>            onAppear: {},
</span></span><span style=display:flex><span>            deleteTransaction: {<span style=color:#ff6ac1>_</span> <span style=color:#ff6ac1>in</span> }
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        HomeScreenContent(
</span></span><span style=display:flex><span>            appErrorData: .constant(SnackbarData.<span style=color:#ff5c57>init</span>()),
</span></span><span style=display:flex><span>            screenErrorData: .constant(SnackbarData.<span style=color:#ff5c57>init</span>()),
</span></span><span style=display:flex><span>            homeModel: .constant(HomeModel.Loading()) ,
</span></span><span style=display:flex><span>            onAppear: {},
</span></span><span style=display:flex><span>            deleteTransaction: {<span style=color:#ff6ac1>_</span> <span style=color:#ff6ac1>in</span> }
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        HomeScreenContent(
</span></span><span style=display:flex><span>            appErrorData: .constant(
</span></span><span style=display:flex><span>                SnackbarData(
</span></span><span style=display:flex><span>                    title: <span style=color:#5af78e>&#34;An error occoured&#34;</span>,
</span></span><span style=display:flex><span>                    subtitle: <span style=color:#5af78e>&#34;Error code 1012&#34;</span>,
</span></span><span style=display:flex><span>                    showBanner: <span style=color:#ff6ac1>true</span>
</span></span><span style=display:flex><span>                )
</span></span><span style=display:flex><span>            ),
</span></span><span style=display:flex><span>            screenErrorData: .constant(SnackbarData.<span style=color:#ff5c57>init</span>()),
</span></span><span style=display:flex><span>            homeModel: .constant(
</span></span><span style=display:flex><span>                HomeModel.Error(
</span></span><span style=display:flex><span>                    uiErrorMessage: UIErrorMessage(
</span></span><span style=display:flex><span>                        message: <span style=color:#5af78e>&#34;Error!&#34;</span>,
</span></span><span style=display:flex><span>                        nerdMessage: <span style=color:#5af78e>&#34;Error code: 101&#34;</span>
</span></span><span style=display:flex><span>                    )
</span></span><span style=display:flex><span>                )
</span></span><span style=display:flex><span>            ) ,
</span></span><span style=display:flex><span>            onAppear: {},
</span></span><span style=display:flex><span>            deleteTransaction: {<span style=color:#ff6ac1>_</span> <span style=color:#ff6ac1>in</span> }
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And that’s all. With this approach, the readability and maintainability of the project really increased, especially when opening it after a few months of inactivity.</p><p>You can find all the code mentioned in the article on <a href=https://github.com/prof18/MoneyFlow>GitHub</a>.</p></section><div class=article-footer><div class=body>To stay up to date with my writing and my projects, follow me on <a href=https://bsky.app/profile/marcogomiero.com target=_blank>Bluesky</a>, <a href=https://androiddev.social/@marcogom target=_blank>Mastodon</a> or <a href=https://twitter.com/marcoGomier target=_blank>Twitter</a>. If you have any questions, feel free to reach me out!</div></div></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.marcogomiero.com>Marco Gomiero</a></span></footer><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-69FZ1TLE7E","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></div></body></html>